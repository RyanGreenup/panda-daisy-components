import { Meta } from "@storybook/addon-docs/blocks";
import { css } from '../styled-system/css';

<Meta title="Getting Started" />


<div class="sbdocs-no-override">



# Panda Component Library


## Using These Components

1. Update the vite config so it does not optimize solid components into React:

   ```ts
   optimizeDeps: {
     exclude: [
         '@ryangreenup/panda-daisy-components',
     ],
   },

   ```

   For Solid Start, which uses Vinxi, this would be the `app.config.ts`, here's a full example:

   ```ts
   import { defineConfig } from "@solidjs/start/config";
   /* @ts-ignore */
   import pkg from "@vinxi/plugin-mdx";

   const { default: mdx } = pkg;
   export default defineConfig({
     extensions: ["mdx", "md"],
     vite: {
       optimizeDeps: {
         exclude: ["@ryangreenup/panda-daisy-components"],
       },
       plugins: [
         mdx.withImports({})({
           jsx: true,
           jsxImportSource: "solid-js",
           providerImportSource: "solid-mdx",
         }),
       ],
     },
   });
   ```

2. Update the `panda.config.ts` to scan the appropriate files:

   ```ts
   import { defineConfig } from "@pandacss/dev";
   import pandaPreset from "@pandacss/preset-panda";

   // Most components depend on this preset
   import { daisyLikePreset } from "@ryangreenup/panda-daisy-components/presets/daisy/daisy";
   // Further requirement for the layout
   import { layoutPreset } from "@ryangreenup/panda-daisy-components/presets/layout/layout";

   export default defineConfig({
     // Whether to use css reset
     preflight: true,

     jsxFramework: "solid",

     include: [
       "./src/**/*.{js,jsx,ts,tsx}",
       "./pages/**/*.{js,jsx,ts,tsx}",
       "./src/**/*.mdx",
       "./pages/**/*.mdx",

       // If installed as a node module
       "./node_modules/@ryangreenup/panda-daisy-components/stories/**/*.{js,tsx,ts,tsx,mdx}",
       "./node_modules/@ryangreenup/panda-daisy-components/src/**/*.{js,tsx,ts,tsx,mdx}",

       // If using filepaths
       // "../panda-storybook/stories/**/*.{js,tsx,ts,tsx,mdx}",
       // "../panda-storybook/src/**/*.{js,tsx,ts,tsx,mdx}",
     ],

     presets: [pandaPreset, layoutPreset, daisyLikePreset],


     // ...

     // The output directory for your css system
     outdir: "styled-system",
   });
   ```

3. Install the dependency

   - File based -- Add this to the `package.json` `dependencies` field:

     ```json
     "dependencies": {
       "@ryan/panda-daisy-components": "file:../panda-storybook",
       ...
       ...
     ]
     ```

   - From GitHub

     ```sh
     module_name="@daisy-ui/storybook"
     repo="RyanGreenup/panda-daisy-components"
     branch="main"
     # Install
     bun install "${module_name}@github:${repo}/#${main}"
     # Pull as needed
     bun update
     ```

     This will add an entry like so to the json

     ```json
     "dependencies": {
       "@panda-ui/components": "github:RyanGreenup/panda-daisy-components/#main",
       ...
       ...
     ]
     ```


4. Import the Preset

   ```
   import { daisyLikePreset } from "@ryangreenup/panda-daisy-components/presets/daisy/daisy";


   export default defineConfig({
     // Whether to use css reset
     preflight: true,
     // Import the preset
     presets: [pandaPreset, layoutPreset, daisyLikePreset],
   ```


4. Import a library, like so:

   ```
   import { VirtualList } from "@panda-ui/storybook";
   ```

## How These Components were Created

1. Create a fresh Storybook:

   ```sh
   npx create-solid-storybook 'panda-storybook'
   ```

2. [Configure Panda CSS for Storybook](https://panda-css.com/docs/installation/storybook)

   - Develop or copy over presets such as
     - `../src/presets/daisy/daisy.ts`
     - [../src/presets/layout/layout.ts](/story/example-layout-compositions--styled-full-layout)
   - Reset the override on the `prose` class to ensure the docs still render correctly. So the `src/index.css` should look something like this
     ```css
     @layer reset, base, tokens, recipes, utilities;

     .sbdocs-no-override * {
       all: revert; /* Reverts all applied styles to browser defaults */
     }
     ```
     
     Then wrap all `mdx` files in:
     
     ```html
     <div class="sbdocs-no-override">

     CONTENT HERE

     </div>
     
     Use Panda CSS here, e.g.

     <div class={css({
     bg: "red.600",
     animation: "spin",
     w: "50",
     h: "50",
     })} >
     foo
     </div>

     <div class="sbdocs-no-override">

     CONTINUE CONTENT HERE

     </div>
     ```
     
     This is not mentioned in the [Panda Docs](https://panda-css.com/docs/installation/storybook) although there are tangential Github issues on storybook, see e.g. [#10270](https://github.com/storybookjs/storybook/issues/10270)

3. Track Styled-System by removing it from `.gitignore`, `git add`, `git commit`

4. Do NOT use an alias for any imports, these are compiled by typescript and will not work properly when imported by the consumer
   - This includes `/src/` and `/styled-system` !
   - Note generally storbook aliases must be set up in `../.storybook/main.ts` rather than `../tsconfig.json` which is for the _React_ side of things.
5. Ensure `package.json` has an appropriate name, e.g. `@ryangreenup/panda-daisy-components` and remove the `private: true` flag.

   - It may be necessary to add some additional fields to the `package.json` if it will be imported from GitHub rather than a file, here

     ```diff

     diff --git a/package.json b/package.json
     index 5053e1c..0502e14 100644
     --- a/package.json
     +++ b/package.json
     @@ -1,7 +1,18 @@
     {
     -  "name": "/home/ryan/Sync/Projects/solid-js/panda/panda-storybook",
     +  "name": "@ryan/panda-daisy-components",
       "version": "0.0.0",
     -  "private": true,
     +  "main": "src/index.ts",
     +  "module": "src/index.ts",
     +  "types": "src/index.ts",
     +  "exports": {
     +    ".": {
     +      "import": "./src/index.ts",
     +      "types": "./src/index.ts"
     +    }
     +  },
     +  "files": [
     +    "src"
     +  ],
       "scripts": {
         "storybook": "storybook dev -p 6006",
         "build-storybook": "storybook build",

     ```

     and a complete example:

     ```json
     {
       "name": "@ryan/panda-daisy-components",
       "version": "0.0.0",
       "main": "src/index.ts",
       "module": "src/index.ts",
       "types": "src/index.ts",
       "exports": {
         ".": {
           "import": "./src/index.ts",
           "types": "./src/index.ts"
         },
         "./presets/*": {
           "import": "./src/presets/*.ts",
           "types": "./src/presets/*.ts"
         }
       },

       "files": ["src"],
       "scripts": {
         "storybook": "storybook dev -p 6006",
         "build-storybook": "storybook build",
         "prepare": "panda codegen",
         "prepare-clean": "panda codegen --clean"
       },
       "devDependencies": {
         "@chromatic-com/storybook": "^4.1.1",
         "@pandacss/dev": "^1.2.0",
         "@storybook/addon-a11y": "^9.1.3",
         "@storybook/addon-docs": "^9.1.3",
         "@storybook/addon-links": "^9.1.3",
         "@storybook/addon-onboarding": "^9.1.3",
         "@storybook/addon-vitest": "^9.1.3",
         "@vitest/browser": "^3.2.4",
         "@vitest/coverage-v8": "^3.2.4",
         "playwright": "^1.55.0",
         "solid-js": "^1.9.9",
         "storybook": "^9.1.3",
         "storybook-solidjs-vite": "^9.0.3",
         "vitest": "^3.2.4"
       },
       "dependencies": {
         "@tanstack/solid-virtual": "^3.13.12",
         "lucide-solid": "^0.542.0",
         "solid-transition-group": "^0.3.0"
       }
     }
     ```

6. Update any peerDependencies to signal requirements for a consumer

   - These won't be imported automatically, but the consumer can check / be advised

7. Export the components through `index.ts` allowing the consumer to import them like so:

    ```tsx
    import { VirtualList } from "@ryangreenup/panda-daisy-components";
    ```

8. Export the `presets` through the `package.json` (as shown above), these **cannot** be exported through the `index.ts` and must be exported directly. The consumer can import the presets like so:

    ```ts
    import { daisyLikePreset } from "@ryangreenup/panda-daisy-components/presets/daisy/daisy";
    ```

9. Push to Github


</div>


## Appendix

### Example of Panda CSS in MDX

<div class="sbdocs-no-override">
This paragraph is inside the `sbdocs-no-override` class, then it ends to permit Panda CSS Below
</div>

<table>
<thead>
<tr class="header">
<th>Spinning</th>
<th>Pulsing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="group">
    <div class={css({
    bg: "red.600",
    animation: "bounce",
    w: "50",
    h: "50",
    _groupHover: {
      bg: "red.800",
      transform: "scale(2)",
      transition: "all 0.3s ease",
    }
    })} >
    foo
    </div>
</td>
<td class="group">
    <div class={css({
    bg: "red.600",
    animation: "pulse",
    w: "50",
    h: "50",
    _groupHover: {
      bg: "red.800",
      transform: "scale(2)",
      transition: "all 0.3s ease",
    }
    })} >
    foo
    </div>
</td>
</tr>
</tbody>
</table>
